{"title":"nginx_guide","slug":"nginx-guide","date":"2019-04-14T07:14:39.000Z","updated":"2019-04-21T02:22:11.133Z","comments":true,"excerpt":"","content":"<h3 id=\"Download-Nginx\"><a href=\"#Download-Nginx\" class=\"headerlink\" title=\"Download Nginx\"></a>Download Nginx</h3><p>find link in <a href=\"http://nginx.org/en/download.html\" target=\"_blank\" rel=\"external\">Nginx_download</a><br><code>wget http://nginx.org/download/nginx-1.14.2.tar.gz</code><br><code>tar -zxvf nginx nginx-1.14.2.tar.gz -C &lt;path&gt;</code><br><code>cd path/nginx-1.14.2 &amp;&amp; ll</code><br><img src=\"/2019/04/14/nginx-guide/1.png\" alt=\"pic\">  </p>\n<h3 id=\"Directory-Structure\"><a href=\"#Directory-Structure\" class=\"headerlink\" title=\"Directory Structure\"></a>Directory Structure</h3><ol>\n<li>auto<br>support configure script<br><code>ll auto</code><br><img src=\"/2019/04/14/nginx-guide/2.png\" alt=\"pic\">  </li>\n<li>conf<br>template of nginx conf  </li>\n<li>contrib<br><img src=\"/2019/04/14/nginx-guide/3.png\" alt=\"pic\"><br>let your vim know nginx syntax<br><code>cp -r contrib/vim/* ~/.vim</code>  </li>\n<li>man<br><code>man man/nginx.8</code>  </li>\n<li>html<br>50x and index default html file for nginx  </li>\n<li>src<br><img src=\"/2019/04/14/nginx-guide/4.png\" alt=\"pic\">  <h3 id=\"Compile\"><a href=\"#Compile\" class=\"headerlink\" title=\"Compile\"></a>Compile</h3>check attribute of configure<br><code>./configure --help</code><br><strong>–with-</strong> module will not compile by default<br><strong>–without-</strong> module will compile by default<br>better use <strong>absolute path</strong><br><code>./configure --prefix=/prefix_path</code><br>an objs dir is new during ./configure running<br><img src=\"/2019/04/14/nginx-guide/5.png\" alt=\"success_pic\"><br><code>make</code><br><strong>nginx</strong> binary file is generate in ./objs, all dynamic module are here<br><code>make install</code><br><code>cd prefix_path</code><br><code>sudo ./sbin/nginx</code><br>now by default, you can visit nginx by server’s 80 port  </li>\n</ol>\n<p>###</p>\n<h3 id=\"Hot-Deploy\"><a href=\"#Hot-Deploy\" class=\"headerlink\" title=\"Hot-Deploy\"></a>Hot-Deploy</h3><p><code>cp nginx nginx.old</code><br><code>cp -f somepath/nginx nginx</code><br><code>kill -USR2 pid_of_old_nginx</code><br>a new nginx process will start..<br>tell old version nginx shutdown gracefully, master process of old nginx will not stop, because we could cancel update nginx<br><code>kill -WINCH pid_of_old_nginx</code></p>\n","categories":[],"tags":[{"name":"ForRemember","path":"api/tags/ForRemember.json"}]}